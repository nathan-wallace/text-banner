import{r,R as p}from"./index-CgfFrydU.js";import{P as o}from"./index-Co38GRlK.js";import{I as K}from"./ImageWithPlaceholder-CyTsu8JG.js";import{u as L}from"./brand-BTa54lbn.js";const N=t=>!!(t&&t.type&&t.type.startsWith("image/")),X=(t,c)=>{const s=new FileReader;s.onload=a=>{var i;const u=(i=a.target)==null?void 0:i.result;typeof u=="string"&&c(u)},s.readAsDataURL(t)},C=({imageProps:t,initialSrc:c,helperText:s="Drag & drop or click to upload an image",onChange:a,containerStyle:u,dropZoneStyle:i,renderImage:b,inputProps:q,helperTextStyle:E,className:v,storageKey:A})=>{const h=r.useRef(null),[l,y]=r.useState(!1),g=c??(t==null?void 0:t.src)??null,[k,I]=L(A,g),[f,j]=r.useState(k??g);r.useEffect(()=>{j(k??g)},[k,g]);const m=r.useCallback(e=>{N(e)&&X(e,n=>{j(n),I(n),a==null||a(n,e)})},[a,I]),P=r.useCallback(e=>{var d;const n=(d=e.target.files)==null?void 0:d[0];n&&m(n)},[m]),R=r.useCallback(e=>{var d;e.preventDefault(),e.stopPropagation(),y(!1);const n=(d=e.dataTransfer.files)==null?void 0:d[0];n&&m(n)},[m]),T=r.useCallback(e=>{e.preventDefault(),e.stopPropagation(),y(!0)},[]),z=r.useCallback(e=>{e.preventDefault(),e.stopPropagation(),y(!1)},[]),x=r.useCallback(()=>{var e;(e=h.current)==null||e.click()},[]),S=!!f,w=r.useMemo(()=>({...{display:"inline-flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:S?"2px dashed transparent":`2px dashed ${l?"#007bff":"#cccccc"}`,borderRadius:"12px",padding:0,cursor:"pointer",transition:"border-color 0.2s ease, background-color 0.2s ease",backgroundColor:l&&!S?"rgba(0, 123, 255, 0.1)":"transparent"},...i||{}}),[i,S,l]),F=r.useMemo(()=>{const e={...t||{},src:f??(t==null?void 0:t.src)};return b?b(e,{isDragging:l,src:f}):p.createElement(K,{...e})},[t,b,l,f]);return p.createElement("div",{className:v,style:{display:"inline-flex",flexDirection:"column",alignItems:"center",...u||{}}},p.createElement("div",{role:"button",tabIndex:0,onClick:x,onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),x())},onDrop:R,onDragOver:T,onDragLeave:z,style:w},p.createElement("input",{type:"file",accept:"image/*",ref:h,style:{display:"none"},onChange:P,...q}),F),s?p.createElement("p",{style:{margin:"0.75rem 0 0",fontSize:"0.875rem",color:"#333",textAlign:"center",...E||{}}},s):null)};C.propTypes={imageProps:o.object,initialSrc:o.string,helperText:o.string,onChange:o.func,containerStyle:o.object,dropZoneStyle:o.object,renderImage:o.func,inputProps:o.object,helperTextStyle:o.object,className:o.string,storageKey:o.string};C.__docgenInfo={description:"",methods:[],displayName:"DroppableImage",props:{helperText:{defaultValue:{value:'"Drag & drop or click to upload an image"',computed:!1},description:"",type:{name:"string"},required:!1},imageProps:{description:"",type:{name:"object"},required:!1},initialSrc:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!1},containerStyle:{description:"",type:{name:"object"},required:!1},dropZoneStyle:{description:"",type:{name:"object"},required:!1},renderImage:{description:"",type:{name:"func"},required:!1},inputProps:{description:"",type:{name:"object"},required:!1},helperTextStyle:{description:"",type:{name:"object"},required:!1},className:{description:"",type:{name:"string"},required:!1},storageKey:{description:"",type:{name:"string"},required:!1}}};const D={backgroundSize:"cover",backgroundPositionX:50,backgroundPositionY:50},M={backgroundSize:{control:{type:"select",options:["cover","contain","fill","none","scale-down"]},description:"How the image should scale within its frame (CSS background-size/object-fit)",table:{category:"Image Adjustments"}},backgroundPositionX:{control:{type:"range",min:0,max:100,step:1},description:"Horizontal focus point for the image (%)",table:{category:"Image Adjustments"}},backgroundPositionY:{control:{type:"range",min:0,max:100,step:1},description:"Vertical focus point for the image (%)",table:{category:"Image Adjustments"}}},O=(t={},c=D.backgroundSize,s=D.backgroundPositionX,a=D.backgroundPositionY)=>({objectFit:c,objectPosition:`${s}% ${a}%`,...t});export{C as D,D as a,M as b,O as c};
