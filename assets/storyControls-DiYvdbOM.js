import{r as n,R as b}from"./index-CgfFrydU.js";import{P as r}from"./index-Co38GRlK.js";import{I as $}from"./ImageWithPlaceholder-D2jZaSUu.js";import{u as L}from"./brand-BTa54lbn.js";const _=t=>!!(t&&t.type&&t.type.startsWith("image/")),H=(t,s)=>{const l=new FileReader;l.onload=i=>{var d;const c=(d=i.target)==null?void 0:d.result;typeof c=="string"&&s(c)},l.readAsDataURL(t)},w=({imageProps:t,initialSrc:s,helperText:l="Drag & drop or click to upload an image",onChange:i,containerStyle:c,dropZoneStyle:d,renderImage:S,inputProps:v,helperTextStyle:q,className:E,storageKey:T})=>{const j=n.useRef(null),[g,h]=n.useState(!1),m=s??(t==null?void 0:t.src)??null,[D,I]=L(T,m),[y,z]=n.useState(D??m);n.useEffect(()=>{z(D??m)},[D,m]);const k=n.useCallback(e=>{_(e)&&H(e,o=>{z(o),I(o),i==null||i(o,e)})},[i,I]),A=n.useCallback(e=>{var f;const o=(f=e.target.files)==null?void 0:f[0];o&&k(o)},[k]),F=n.useCallback(e=>{var f;e.preventDefault(),e.stopPropagation(),h(!1);const o=(f=e.dataTransfer.files)==null?void 0:f[0];o&&k(o)},[k]),R=n.useCallback(e=>{e.preventDefault(),e.stopPropagation(),h(!0)},[]),B=n.useCallback(e=>{e.preventDefault(),e.stopPropagation(),h(!1)},[]),C=n.useCallback(()=>{var e;(e=j.current)==null||e.click()},[]),x=!!y,a=t==null?void 0:t.width,u=t==null?void 0:t.height,V=n.useMemo(()=>({...{display:"inline-flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:x?"2px dashed transparent":`2px dashed ${g?"#007bff":"#cccccc"}`,borderRadius:"12px",padding:0,cursor:"pointer",transition:"border-color 0.2s ease, background-color 0.2s ease",backgroundColor:g&&!x?"rgba(0, 123, 255, 0.1)":"transparent"},...a?{width:"100%",maxWidth:a}:{},...a&&u?{aspectRatio:`${a} / ${u}`}:{},...d||{}}),[d,x,g,a,u]),W=n.useMemo(()=>{const e={...t||{},src:y??(t==null?void 0:t.src)};return S?S(e,{isDragging:g,src:y,naturalWidth:a,naturalHeight:u}):b.createElement($,{responsive:!0,...e})},[t,S,g,y,a,u]);return b.createElement("div",{className:E,style:{display:"inline-flex",flexDirection:"column",alignItems:"center",width:"100%",...a?{maxWidth:a}:{},...c||{}}},b.createElement("div",{role:"button",tabIndex:0,onClick:C,onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),C())},onDrop:F,onDragOver:R,onDragLeave:B,"data-export-target":"true","data-native-width":a,"data-native-height":u,style:V},b.createElement("input",{type:"file",accept:"image/*",ref:j,style:{display:"none"},onChange:A,...v}),W),l?b.createElement("p",{style:{margin:"0.75rem 0 0",fontSize:"0.875rem",color:"#333",textAlign:"center",...q||{}}},l):null)};w.propTypes={imageProps:r.object,initialSrc:r.string,helperText:r.string,onChange:r.func,containerStyle:r.object,dropZoneStyle:r.object,renderImage:r.func,inputProps:r.object,helperTextStyle:r.object,className:r.string,storageKey:r.string};w.__docgenInfo={description:"",methods:[],displayName:"DroppableImage",props:{helperText:{defaultValue:{value:'"Drag & drop or click to upload an image"',computed:!1},description:"",type:{name:"string"},required:!1},imageProps:{description:"",type:{name:"object"},required:!1},initialSrc:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!1},containerStyle:{description:"",type:{name:"object"},required:!1},dropZoneStyle:{description:"",type:{name:"object"},required:!1},renderImage:{description:"",type:{name:"func"},required:!1},inputProps:{description:"",type:{name:"object"},required:!1},helperTextStyle:{description:"",type:{name:"object"},required:!1},className:{description:"",type:{name:"string"},required:!1},storageKey:{description:"",type:{name:"string"},required:!1}}};const p={backgroundSize:"cover",backgroundPositionX:50,backgroundPositionY:50},K=new Set(["contain","cover","fill","none","scale-down"]),M={backgroundSize:{control:{type:"text"},description:"How the image should scale within its frame. Enter any CSS background-size value or an object-fit keyword (cover, contain, fill, none, scale-down).",table:{category:"Image Adjustments",type:{summary:"string",detail:"Supports standard object-fit keywords for <img> elements and any CSS background-size value for background-based layouts."}}},backgroundPositionX:{control:{type:"range",min:0,max:100,step:1},description:"Horizontal focus point for the image (%)",table:{category:"Image Adjustments"}},backgroundPositionY:{control:{type:"range",min:0,max:100,step:1},description:"Vertical focus point for the image (%)",table:{category:"Image Adjustments"}}},N=t=>{if(typeof t!="string")return p.backgroundSize;const s=t.trim();return s.length?s:p.backgroundSize},J=(t={},s=p.backgroundSize,l=p.backgroundPositionX,i=p.backgroundPositionY)=>{const c=N(s);return{boxSizing:"border-box",objectFit:K.has(c)?c:p.backgroundSize,objectPosition:`${l}% ${i}%`,backgroundSize:c,...t}};export{w as D,p as a,M as b,J as c};
